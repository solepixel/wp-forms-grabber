var WPFG;!function(e){WPFG={$target:!1,counter:0,schemas:!1,schema:!1,add_menu:function(e){this.schemas||(this.schemas=JSON.parse(wpfg_vars.schemas)),this.schemas[e.schema]&&(this.schema=this.schemas[e.schema],this.counter++,this.build_form_menu(e))},build_form_menu:function(e){var t=this.create_top_menu(),a="wpfg-"+e.schema+"-form-"+e.form_id,n=this.get_edit_url(e),i=this.get_title(e,a);if(Object.keys(this.schema.menus).length>1){var r=this.create_sub_menu(a,n,i);t.append(r);for(var m in this.schema.menus){var s=this.schema.menus[m].url.format(e.form_id),u=this.schema.menus[m].label;r.find("ul").append(this.create_menu_item(a+m,s,u))}}else t.append(this.create_menu_item(a,n,i))},get_title:function(t,a){return t.title?t.title:this.schema.callback?(e.ajax({url:wpfg_vars.ajax_url,data:{action:"wpfg_get_title",form_id:t.form_id,schema:t.schema},type:"get",dataType:"json",success:function(t){t.form_title&&e("#wp-admin-bar-"+a).find("a:first").text(t.form_title)}}),"Edit Form "+this.counter):"Edit Form "+this.counter},get_edit_url:function(e){return this.schema.menus.edit?this.schema.menus.edit.url.format(e.form_id):"#"},create_top_menu:function(){var t="wpfg",a=e("#wp-admin-bar-"+t+"-default");if(a.length)return a;var n=this.create_sub_menu(t,"#","Edit Forms");return this.$target=e("#wp-admin-bar-root-default"),this.$target.append(n),e("#wp-admin-bar-"+t+"-default")},create_sub_menu:function(t,a,n){var i=e('<li id="wp-admin-bar-'+t+'" class="menupop" />'),r=e('<a class="ab-item" aria-haspopup="true" href="'+a+'" />').html(n),m=e('<div class="ab-sub-wrapper" />'),s=e('<ul id="wp-admin-bar-'+t+'-default" class="ab-submenu" />');return m.append(s),i.append(r),i.append(m),i},create_menu_item:function(t,a,n){var i=e('<li id="wp-admin-bar-'+t+'" />'),r=e('<a class="ab-item" href="'+a+'" />').text(n);return i.append(r),i}},e(document).bind("gform_post_render",function(e,t){WPFG.add_menu({form_id:t,schema:"gravityforms"})}),e(function(){e.each(e(".wpcf7-form"),function(t,a){var n=e(a).find('input[name="_wpcf7"]').val();WPFG.add_menu({form_id:n,schema:"cf7"})})}),e(function(){e.each(e(".ninja-forms-form"),function(t,a){var n=e(a).find('input[name="_form_id"]').val();WPFG.add_menu({form_id:n,schema:"ninjaforms"})})}),e(function(){e("#wp-admin-bar-frm-forms").hide(),e.each(e(".frm_style_formidable-style"),function(t,a){var n=e(a).find('input[name="form_id"]').val();WPFG.add_menu({form_id:n,schema:"formidable"})})})}(jQuery),String.prototype.format||(String.prototype.format=function(){var e=arguments;return this.replace(/{(\d+)}/g,function(t,a){return"undefined"!=typeof e[a]?e[a]:t})});